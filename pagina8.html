<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pine Tree Farm - Bebidas Alcoólicas</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
  <style>
    /* Define a imagem de fundo para cobrir toda a página */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
      font-family: 'Roboto', sans-serif;
      background: url("fundo de pagina.png") no-repeat center center fixed;
      background-size: cover;
      overflow-x: hidden;
    }
    /* Wrapper: envolve todo o conteúdo e aplica a borda com gradiente */
    .wrapper {
      width: 100%;
      min-height: 100vh;
      box-sizing: border-box;
      border: 5px solid transparent;
      border-image: linear-gradient(90deg, #05bddc, #FFD700) 1;
    }
    /* Container: centraliza o conteúdo sem fundo branco ou sombra */
    .container {
      position: relative;
      padding: 20px;
      margin: 20px auto;
      max-width: 1200px;
      background: transparent; /* Fundo transparente */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .title-wrapper {
      text-align: center;
      width: 100%;
    }
    .page-title {
      display: inline-block;
      font-size: 2.5rem;
      font-weight: bold;
      color: #fff;
      background-color: #00692e;
      padding: 5px 15px;
      border-radius: 5px;
      margin: 80px auto 20px;
      text-shadow: 2px 2px 3px rgba(0,0,0,0.2);
    }
    /* Caixa de atenção, semelhante à da página 3 */
    #alertBox {
      margin-top: 20px;
      background-color: #FFF3CD;
      border: 1px solid #FFEEBA;
      padding: 15px;
      border-radius: 8px;
      font-size: 0.95rem;
      color: #856404;
      text-align: center;
      width: 100%;
      max-width: 600px;
    }
    .row {
      margin-top: 20px;
      width: 100%;
    }
    .product-item {
      margin-bottom: 40px;
      text-align: center;
      padding: 15px;
      border-radius: 8px;
      cursor: default;
    }
    .photo-upload {
      width: 150px;
      height: 150px;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #00692e;
      border-radius: 8px;
      overflow: hidden;
    }
    .photo-upload img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .product-name {
      font-size: 1.1rem;
      font-weight: bold;
      background-color: #00692e;
      color: #fff;
      padding: 8px;
      border-radius: 5px;
      margin-top: 10px;
    }
    .unit-price {
      display: inline-block;
      background-color: #FFD700;
      color: #000;
      padding: 5px 10px;
      border-radius: 20px;
      font-weight: bold;
      margin-top: 5px;
    }
    .quantity-input {
      width: 50px;
      font-size: 1rem;
      padding: 5px;
      text-align: center;
      margin-top: 10px;
    }
    .btn-custom {
      background: linear-gradient(90deg, #05bddc, #00692e);
      border: none;
      padding: 12px 25px;
      font-size: 1.1rem;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      margin: 20px auto 0;
      display: block;
      width: 200px;
    }
    .btn-custom:hover {
      background: linear-gradient(90deg, #00692e, #05bddc);
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .nav-buttons {
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 20px;
    }
    #cartContainer {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #FFD700;
      color: #000;
      padding: 10px 15px;
      border-radius: 50%;
      font-size: 1.2rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #cartContainer span {
      margin-left: 5px;
    }
    @media (max-width:768px) {
      #cartContainer {
        top: 10px;
        right: 10px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="container">
      <!-- Carrinho -->
      <div id="cartContainer">
        🛒 <span id="cartValue"></span>
      </div>
      
      <!-- Título centralizado -->
      <div class="title-wrapper">
        <div class="page-title">Bebidas Alcoólicas</div>
      </div>
      
      <!-- Caixa de atenção com a mensagem -->
      <div id="alertBox">
        A cerveja adquirida antecipadamente custará R$13,00, sendo R$16,00 no dia do evento.
      </div>
      
      <!-- Grid de itens -->
      <div class="row">
        <!-- Item 1: Cerveja Heineken -->
        <div class="col-md-4 product-item">
          <div class="photo-upload">
            <img src="cervejas/heineken.jpg" alt="Heineken">
          </div>
          <div class="product-name">Cerveja Heineken long neck 330ml</div>
          <div class="unit-price">R$ 13,00</div>
          <input type="number" class="quantity-input" data-price="13" min="0" value="0">
        </div>
        <!-- Item 2: Cerveja Corona -->
        <div class="col-md-4 product-item">
          <div class="photo-upload">
            <img src="cervejas/corona.jpg" alt="Corona">
          </div>
          <div class="product-name">Cerveja Corona long neck 330ml</div>
          <div class="unit-price">R$ 13,00</div>
          <input type="number" class="quantity-input" data-price="13" min="0" value="0">
        </div>
        <!-- Item 3: Stella Artois -->
        <div class="col-md-4 product-item">
          <div class="photo-upload">
            <img src="cervejas/stella.jpg" alt="Stella Artois">
          </div>
          <div class="product-name">Stella Artois Gold - sem glútem 330ml</div>
          <div class="unit-price">R$ 13,00</div>
          <input type="number" class="quantity-input" data-price="13" min="0" value="0">
        </div>
      </div>
      
      <!-- Botões de navegação -->
      <div class="nav-buttons">
        <button type="button" class="btn-custom" id="voltarPage8">Voltar</button>
        <button type="button" class="btn-custom" id="proximo">Próximo</button>
      </div>
    </div>
  </div>
  
  <script>
    // Função para formatar valores conforme o padrão brasileiro
    function formatCurrency(value) {
      return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
    }
    
    // Recupera o valor salvo da Página 7. Se a chave "totalCompra" existir, utiliza-a; caso contrário, usa "totalEventoCart"
    var totalCompra = parseFloat(localStorage.getItem("totalCompra"));
    if (isNaN(totalCompra)) {
      totalCompra = parseFloat(localStorage.getItem("totalEventoCart")) || 0;
    }
    // Define a baseTotal e originalTotal para o carrinho
    var baseTotal = totalCompra;
    var originalTotal = baseTotal;
    
    // Exibe o valor inicial do carrinho
    document.getElementById("cartValue").innerText = "Valor parcial do evento: " + formatCurrency(baseTotal);
    
    // Função para atualizar o carrinho com o custo das bebidas
    function updateBeverageTotal() {
      var beverageTotal = 0;
      document.querySelectorAll(".quantity-input").forEach(function(input) {
        var quantity = parseFloat(input.value) || 0;
        var price = parseFloat(input.dataset.price);
        beverageTotal += quantity * price;
      });
      var newTotal = baseTotal + beverageTotal;
      localStorage.setItem("totalEvento", newTotal.toFixed(2));
      document.getElementById("cartValue").innerText = " Valor parcial do evento: " + formatCurrency(newTotal);
    }
    
    // Atualiza o total quando o usuário altera o valor dos inputs
    document.querySelectorAll(".quantity-input").forEach(function(input) {
      input.addEventListener("change", updateBeverageTotal);
    });
    
    // Função para salvar os itens selecionados (bebidas)
    function saveBeverages() {
      var selectedBeverages = [];
      document.querySelectorAll(".product-item").forEach(function(item) {
        var productName = item.querySelector(".product-name").innerText;
        var unitPrice = parseFloat(item.querySelector(".quantity-input").dataset.price);
        var quantity = parseFloat(item.querySelector(".quantity-input").value) || 0;
        if (quantity > 0) {
          selectedBeverages.push({
            name: productName,
            unitPrice: unitPrice,
            quantity: quantity
          });
        }
      });
      localStorage.setItem("selectedBeverages", JSON.stringify(selectedBeverages));
    }
    
    window.onload = function() {
      var editMode = localStorage.getItem("edit_bebidas");
      if (editMode === "true") {
        // Modo edição: Botão Voltar retorna para Página 11 e botão Próximo atua como "Salvar"
        document.getElementById("voltarPage8").addEventListener("click", function() {
          window.location.href = "pagina11.html";
        });
        document.getElementById("proximo").innerText = "Salvar";
        document.getElementById("proximo").addEventListener("click", function() {
          saveBeverages();
          localStorage.removeItem("edit_bebidas");
          window.location.href = "pagina11.html";
        });
      } else {
        // Fluxo normal: Botão Voltar retorna para Página 7 e botão Próximo segue para Página 9
        document.getElementById("voltarPage8").addEventListener("click", function() {
          localStorage.setItem("totalEvento", originalTotal.toFixed(2));
          window.location.href = "pagina7.html";
        });
        document.getElementById("proximo").addEventListener("click", function() {
          saveBeverages();
          window.location.href = "pagina9.html"; // ajuste conforme necessário
        });
      }
    };
  </script>
</body>
</html>
